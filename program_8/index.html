<!DOCTYPE html>
<html>

<head>

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="author" content="">



<meta charset=utf-8 />
<title>Client Side Pagination</title>
<link rel="stylesheet" type="text/css" media="screen" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" />
<link rel="stylesheet" type="text/css" media="screen" href="./css/font-awesome.css" />
<script   src="https://code.jquery.com/jquery-2.2.4.js"   integrity="sha256-iT6Q9iMJYuQiMWNd9lDyBUStIq/8PuOW33aOqmvFpqI="   crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
<script src="./plugin/jquery.twbsPagination.js"></script>
<script src="./js/cookies.js"></script>




<title>Shop Homepage - Start Bootstrap Template</title>

<!-- Bootstrap Core CSS -->
<link href="css/bootstrap.min.css" rel="stylesheet">

<!-- Custom CSS -->
<link href="css/shop-homepage.css" rel="stylesheet">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->
<style>
img.slide-image { max-width: 100%;}

#pleaseWaitDialog {
        width: 400px;
        height: 50px;
        position: absolute;
        top: 50%;
        left: 50%;
        margin-top: -25px;
        margin-left: -200px;
        padding: 20px;
    }

    /* When the body has the loading class, we turn
       the scrollbar off with overflow:hidden */
    body.loading {
        overflow: hidden;   
    }

    /* Anytime the body has the loading class, our
       modal element will be visible */
    body.loading .modal {
        display: block;
    }
    
    .col-centered{
        float: none;
        margin: 0 auto;
    }
    
    .modal-header {
        padding-bottom: 50px;
    }

    .modal-footer {
            padding: 0;
        }

    .modal-footer .btn-group button {
        height:40px;
        border-top-left-radius : 0;
        border-top-right-radius : 0;
        border: none;
        border-right: 1px solid #ddd;
    }

    .modal-footer .btn-group:last-child > button {
        border-right: 0;
    }
    
    body {
        padding:75px;
    }

</style>
</head>

<body>

<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#">Start Bootstrap</a>
        </div>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav">
                <li>
                    <a href="#">About</a>
                </li>
                <li>
                    <a href="#">Services</a>
                </li>
                <li>
                    <a href="#">Contact</a>
                </li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">

    <div class="row1">

        <div class="col-md-3">
            <p class="lead">Shop Name</p>
            <div class="list-group" id="catId">
            </div>
        </div>

        <div class="col-md-9">

            <div class="row1 carousel-holder">

                <div class="col-md-12">
                    <div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
                        <ol class="carousel-indicators">
                            <li data-target="#carousel-example-generic" data-slide-to="0" class="active"></li>
                            <li data-target="#carousel-example-generic" data-slide-to="1"></li>
                            <li data-target="#carousel-example-generic" data-slide-to="2"></li>
                        </ol>
                        <div class="carousel-inner">
                            <div class="item active">
                                <img class="slide-image" src="http://store.storeimages.cdn-apple.com/4973/as-images.apple.com/is/image/AppleInc/aos/published/images/I/MA/IMAC/IMAC?wid=1200&hei=630&fmt=jpeg&qlt=95&op_sharpen=0&resMode=bicub&op_usm=0.5,0.5,0,0&iccEmbed=0&layer=comp&.v=8oel91" style="height:350px"/>
                            </div>
                            <div class="item">
                                <img class="slide-image" src="http://www.spokeslabs.com/jstone/ps4_images/ps4-hrdware-large18.jpg" style="height:350px"/>
                            </div>
                            <div class="item">
                                <img class="slide-image" src="https://doxz7msmg7sxx.cloudfront.net/media/wysiwyg/cms-plus/main-image/black_121.jpg" style="height:350px"/>
                            </div>
                        </div>
                        <a class="left carousel-control" href="#carousel-example-generic" data-slide="prev">
                            <span class="glyphicon glyphicon-chevron-left"></span>
                        </a>
                        
                        <a class="right carousel-control" href="#carousel-example-generic" data-slide="next">
                            <span class="glyphicon glyphicon-chevron-right"></span>
                        </a>
                    </div>
                </div>

            </div>

            
            <div class="row1" id="rowId">

            </div>
        </div>

    </div>

</div>
<!-- /.container -->

<div class="container">

    <!-- Footer -->
    <footer>
        <div class="row1">
            <div class="col-lg-12">
                <p>Copyright &copy; Your Website 2014</p>
            </div>
        </div>
    </footer>

</div>
<!-- /.container -->

<div class="row">
    <div class="col-xs-12 col-sm-8"><center>
      <ul id="pagination-demo" class="pagination-sm"></ul>
      </center>
    </div>

    <div class="modal hide" id="pleaseWaitDialog" data-backdrop="static" data-keyboard="false">
        <div class="modal-header">
            <h1>Processing...</h1>
        </div>
        <div class="modal-body">
            <div class="progress progress-striped active">
                <div class="bar" style="width: 100%;"></div>
            </div>
        </div>
    </div>
</div>





<script> 
    
(function($){
    var myWait;
    myWait = myWait || (function () {
    var waitDiv = $('<div class="modal" id="pleaseWaitDialog" data-backdrop="static" data-keyboard="false"><div class="progress"> <div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width:98%"> LOADING... </div></div></div>');
    return {
        show: function() {
            waitDiv.modal();
        },
        hide: function () {
            waitDiv.modal('hide');
        },

    };
    })();
    
   
    var page = 1;
    var page_size = 12;
    var total_records = 0;
    var total_pages = 0;

    function getData(page, page_size, sort, order, category){
        var sort = typeof sort !== 'undefined' ?  sort.trim() : "id";
        var order = typeof order !== 'undefined' ?  ","+order : "";
     
        myWait.show();
        
        var url2 = "http://198.199.67.218/api/api.php/products?order="+sort+order+"&page=" + page + "," + page_size
        
       
        
        var url1 = "http://198.199.67.218/api/api.php/products?order=id&page=" + page + "," + page_size + "&filter=category,eq," + category
        
        
        //console.log(url1);
        //console.log("url 2:  " + url2);
        
        
        var url = typeof category !== 'undefined' ?  url1 : url2;
          
         $.get(url)
         .done(function(data) {
            
            var cols = data.products.columns;
       
            var rows = data.products.records;
            
            var rowHTML = "";
            
            for(var i = 0 ; i < rows.length ; i++){
                 //console.log(rows[0][3]);
            var imageURL = rows[i][4].replace('~','360'); 
             imageURL = imageURL.split(" ");
            //document.getElementById('image').src = imageURL[0];
            var price = rows[i][3]
            var des = rows[i][2].split(" ");
            des = des[0] + " " + des[1];
            
            rowHTML += "<div class=\"col-sm-4 col-lg-4 col-md-4\">"
                   + "<div class=\"thumbnail\" id=\"thumbnailid\">"
                       + "<img id=\"image\" src=\""+imageURL[0]+"\" alt=\"\">"
                        +"<div class=\"caption\">"
                           + "<h4 class=\"pull-right\">$" + price + "</h4>"
                           + "<h4><a class=\"des\" href=\"#\">"+ des +"</a>"
                           + "</h4>"
                           + " <p>" + rows[i][2] + "</p>"
                        +"</div>"
                        +"<div class=\"ratings\">"
                           + "<p class=\"pull-right\">15 reviews</p>"
                           + "<p>"
                               + "<span class=\"glyphicon glyphicon-star\"></span>"
                               + "<span class=\"glyphicon glyphicon-star\"></span>"
                               + "<span class=\"glyphicon glyphicon-star\"></span>"
                               + "<span class=\"glyphicon glyphicon-star\"></span>"
                               + "<span class=\"glyphicon glyphicon-star\"></span>"
                           + "</p>"
                       + "</div>"
                    + "</div>"
               + "</div>"

                }
                
                $('#rowId').html(rowHTML);
         });

            
         
      $('.list-group-item').click(function(event) {
            category123 = $(event.target).text();
            //console.log("here i am " + category123);
     
             if(category123 === "Tablet" || category123 === "Smartphone" || category123 === "Laptop" || category123 === "Ipad"|| category123 === "Game console" || category123 === "Desktop computer" || category123 === "Camera"){
                getData(1,12,"","",category123.toLowerCase());
            }
     
    

        });
        

    
          myWait.hide();
    }
    
    
function getCategory(){
    $.get("http://198.199.67.218/api/api.php/categories")
    .done(function(data){
        //console.log(data.categories.records);

        var catego = data.categories.records;
        
        catego.forEach(function(item1){
            //console.log(item[1]);
            var string = item1[1];
            var catHTML = "<a href=\"#\" class=\"list-group-item\">" + string.capitalize() + "</a>";
            var catRowElement = document.getElementById('catId');
            catRowElement.insertAdjacentHTML( 'beforeend', catHTML);
        });
        
    });
    
   
        String.prototype.capitalize = function() {
            return this.charAt(0).toUpperCase() + this.slice(1);
        }



}

getData(1,12);
getCategory();
 


    function getTotalPages(){
        $.get("http://198.199.67.218/api/api.php/products")

        // The '.done' method fires when the get request completes
        .done(function(data) {

            total_records = data.products.records.length;
            total_pages = parseInt(total_records / page_size);
            getData(1, 12);

            
            $('#pagination-demo').twbsPagination({
                totalPages: total_pages,
                visiblePages: 10,
                onPageClick: function (event, page) {
                    $('#page-content').text('Page ' + page);
                    getData(page,12,"","",category123.toLowerCase());
                }
            });
			
        });

    }



getTotalPages();


}(jQuery));

</script>

</body>

</html>
